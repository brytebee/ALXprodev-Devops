#!/bin/bash

csv_file="pokemon_report.csv"

# Create CSV with header
echo "Name,Height (m),Weight (kg)" > "$csv_file"

# Process all JSON files and extract data
for json_file in pokemon_data/*.json; do
    [ -f "$json_file" ] && jq -r '"\(.name | ascii_upcase[:1] + ascii_downcase[1:]),\(.height/10),\(.weight/10)"' "$json_file" >> "$csv_file"
done

echo "CSV Report generated at: $csv_file"
echo ""
cat "$csv_file"
echo ""

# Calculate averages using awk on the CSV (skip header)
awk -F',' 'NR>1 {height+=$2; weight+=$3; count++} END {printf "Average Height: %.2f m\nAverage Weight: %.2f kg\n", height/count, weight/count}' "$csv_file"
